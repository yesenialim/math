<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Math Game</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            padding: 20px;
        }
        .container {
            margin-top: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        #question {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .btn {
            font-size: 32px;
            padding: 15px 30px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            background-color: #4CAF50;
            color: white;
        }
        .btn:hover {
            background-color: #45a049;
        }
        #message {
            font-size: 36px;
            margin-top: 20px;
            min-height: 50px;
        }
        .language-selector {
            margin: 20px 0;
            font-size: 28px;
        }
        #language {
            font-size: 28px;
            padding: 10px;
            border-radius: 10px;
            min-width: 300px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-size: 28px;
        }
        .number-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px auto;
            max-width: 600px;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        @media (max-width: 600px) {
            .number-buttons {
                grid-template-columns: repeat(3, 1fr);
            }
            .btn {
                font-size: 28px;
                padding: 12px 20px;
            }
            #question {
                font-size: 40px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="game-title">Simple Math Game</h1>
        
        <div class="language-selector">
            <label for="language" id="language-label">üåç Select Language:</label>
            <select id="language" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="zh">‰∏≠Êñá (Chinese)</option>
                <option value="ms">Bahasa Melayu (Malay)</option>
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
            </select>
        </div>

        <p id="question">Loading...</p>

        <div class="number-buttons">
            <button class="btn" onclick="checkAnswer(0)">0</button>
            <button class="btn" onclick="checkAnswer(1)">1</button>
            <button class="btn" onclick="checkAnswer(2)">2</button>
            <button class="btn" onclick="checkAnswer(3)">3</button>
            <button class="btn" onclick="checkAnswer(4)">4</button>
            <button class="btn" onclick="checkAnswer(5)">5</button>
            <button class="btn" onclick="checkAnswer(6)">6</button>
            <button class="btn" onclick="checkAnswer(7)">7</button>
            <button class="btn" onclick="checkAnswer(8)">8</button>
            <button class="btn" onclick="checkAnswer(9)">9</button>
        </div>

        <p id="message"></p>
        
        <div class="action-buttons">
            <button class="btn" onclick="nextQuestion()" id="next-btn">Next Question</button>
            <button class="btn" onclick="speakQuestion()" id="speak-btn">üîä Read Question</button>
        </div>
    </div>

    <script>
        let num1, num2, correctAnswer;
        let currentLang = "en"; // Default to English

        const translations = {
            en: { 
                title: "Simple Math Game", 
                next: "Next Question", 
                correct: "üéâ Well done!", 
                wrong: "‚ùå Try again!", 
                read: "üîä Read Question",
                selectLanguage: "üåç Select Language:",
                options: [
                    { value: "en", text: "English" },
                    { value: "zh", text: "‰∏≠Êñá (Chinese)" },
                    { value: "ms", text: "Bahasa Melayu (Malay)" },
                    { value: "ta", text: "‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)" }
                ]
            },
            zh: { 
                title: "Êï∞Â≠¶Ê∏∏Êàè", 
                next: "‰∏ã‰∏ÄÈ¢ò", 
                correct: "üéâ ÂÅöÂæóÂ•Ω!", 
                wrong: "‚ùå ÂÜçËØï‰∏ÄÊ¨°!", 
                read: "üîä ÊúóËØªÈóÆÈ¢ò",
                selectLanguage: "üåç ÈÄâÊã©ËØ≠Ë®Ä:",
                options: [
                    { value: "en", text: "Ëã±ËØ≠ (English)" },
                    { value: "zh", text: "‰∏≠Êñá (Chinese)" },
                    { value: "ms", text: "È©¨Êù•ËØ≠ (Malay)" },
                    { value: "ta", text: "Ê≥∞Á±≥Â∞îËØ≠ (Tamil)" }
                ]
            },
            ms: { 
                title: "Permainan Matematik Mudah", 
                next: "Soalan Seterusnya", 
                correct: "üéâ Bagus!", 
                wrong: "‚ùå Cuba lagi!", 
                read: "üîä Bacakan Soalan",
                selectLanguage: "üåç Pilih Bahasa:",
                options: [
                    { value: "en", text: "Inggeris (English)" },
                    { value: "zh", text: "Cina (Chinese)" },
                    { value: "ms", text: "Bahasa Melayu (Malay)" },
                    { value: "ta", text: "Tamil (Tamil)" }
                ]
            },
            ta: { 
                title: "‡Æé‡Æ≥‡Æø‡ÆØ ‡Æï‡Æ£‡Æø‡Æ§ ‡Æµ‡Æø‡Æ≥‡Øà‡ÆØ‡Ææ‡Æü‡Øç‡Æü‡ØÅ", 
                next: "‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø", 
                correct: "üéâ ‡Æ®‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ!", 
                wrong: "‚ùå ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç!", 
                read: "üîä ‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡Æü‡Æø",
                selectLanguage: "üåç ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ:",
                options: [
                    { value: "en", text: "‡ÆÜ‡Æô‡Øç‡Æï‡Æø‡Æ≤‡ÆÆ‡Øç (English)" },
                    { value: "zh", text: "‡Æö‡ØÄ‡Æ©‡ÆÆ‡Øç (Chinese)" },
                    { value: "ms", text: "‡ÆÆ‡Æ≤‡Ææ‡ÆØ‡Øç (Malay)" },
                    { value: "ta", text: "‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)" }
                ]
            }
        };

        function generateQuestion() {
            num1 = Math.floor(Math.random() * 5) + 1;
            num2 = Math.floor(Math.random() * 5) + 1;
            correctAnswer = num1 + num2;
            document.getElementById("question").innerText = num1 + " + " + num2 + " = ?";
            document.getElementById("message").innerText = "";
        }

        function checkAnswer(answer) {
            if (answer === correctAnswer) {
                document.getElementById("message").innerText = translations[currentLang].correct;
            } else {
                document.getElementById("message").innerText = translations[currentLang].wrong;
            }
        }

        function nextQuestion() {
            generateQuestion();
        }

        function speakQuestion() {
            let text;
            if (currentLang === "zh") {
                text = num1 + " Âä† " + num2 + " ÊòØÂ§öÂ∞ë?";
            } else if (currentLang === "ms") {
                text = num1 + " tambah " + num2 + " sama dengan berapa?";
            } else if (currentLang === "ta") {
                text = num1 + " ‡Æï‡ØÇ‡Æü‡Øç‡Æü‡Æ≤‡Øç " + num2 + " ‡Æé‡Æ§‡Øç‡Æ§‡Æ©‡Øà?";
            } else {
                text = num1 + " plus " + num2 + " equals what?";
            }

            // Cancel any ongoing speech
            window.speechSynthesis.cancel();
            
            let speech = new SpeechSynthesisUtterance(text);
            speech.lang = getSpeechLangCode();
            
            // Set voice for Tamil if available
            if (currentLang === "ta") {
                const voices = window.speechSynthesis.getVoices();
                const tamilVoice = voices.find(voice => voice.lang === "ta-IN");
                if (tamilVoice) {
                    speech.voice = tamilVoice;
                } else {
                    console.log("Tamil voice not found, using default");
                }
            }
            
            window.speechSynthesis.speak(speech);
        }

        function changeLanguage() {
            let selectedLang = document.getElementById("language").value;
            currentLang = selectedLang;

            // Update all text elements
            document.getElementById("game-title").innerText = translations[selectedLang].title;
            document.getElementById("next-btn").innerText = translations[selectedLang].next;
            document.getElementById("speak-btn").innerText = translations[selectedLang].read;
            document.getElementById("language-label").innerText = translations[selectedLang].selectLanguage;
            document.getElementById("message").innerText = "";
            
            // Update the language options
            const languageSelect = document.getElementById("language");
            languageSelect.innerHTML = "";
            
            translations[selectedLang].options.forEach(option => {
                const optElement = document.createElement("option");
                optElement.value = option.value;
                optElement.text = option.text;
                if (option.value === selectedLang) {
                    optElement.selected = true;
                }
                languageSelect.appendChild(optElement);
            });
        }

        function getSpeechLangCode() {
            return currentLang === "zh" ? "zh-CN" :
                   currentLang === "ms" ? "ms-MY" :
                   currentLang === "ta" ? "ta-IN" :
                   "en-US";
        }

        // Initialize the game
        generateQuestion();
        
        // Load voices when they become available
        let voicesLoaded = false;
        speechSynthesis.onvoiceschanged = function() {
            voicesLoaded = true;
        };
        
        // On mobile devices, we need to handle speech synthesis differently
        document.addEventListener('click', function() {
            if (!voicesLoaded) {
                const voices = window.speechSynthesis.getVoices();
                if (voices.length > 0) {
                    voicesLoaded = true;
                }
            }
        }, false);
    </script>

</body>
</html>
